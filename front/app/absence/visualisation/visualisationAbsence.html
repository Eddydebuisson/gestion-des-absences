
<h1 class="text-center">Gestion des absences</h1>

<div class="container">

    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>
                    <a href="#" ng-click="$ctrl.updateOrderEtTri('dateDebutOriginal')">
                        Date de début
                        <span ng-if="$ctrl.order == 'dateDebutOriginal'">
                            <span ng-show="$ctrl.triInverse">
                                <span class="caret"></span>
                            </span>
                            <span ng-show="!$ctrl.triInverse">
                                <span class="dropup"><span class="caret"></span></span>
                            </span>
                        </span>
                    </a>
                </th>
                <th>
                    <a href="#" ng-click="$ctrl.updateOrderEtTri('dateFinOriginal')">
                        Date de fin
                        <span ng-if="$ctrl.order == 'dateFinOriginal'">
                            <span ng-show="$ctrl.triInverse">
                                <span class="caret"></span>
                            </span>
                            <span ng-show="!$ctrl.triInverse">
                                <span class="dropup"><span class="caret"></span></span>
                            </span>
                        </span>
                    </a>
                </th>
                <th>
                    <a href="#" ng-click="$ctrl.updateOrderEtTri('type')">
                        Type
                        <span ng-if="$ctrl.order == 'type'">
                            <span ng-show="$ctrl.triInverse">
                                <span class="caret"></span>
                            </span>
                            <span ng-show="!$ctrl.triInverse">
                                <span class="dropup"><span class="caret"></span></span>
                            </span>
                        </span>
                    </a>
                </th>
                <th>
                    <a href="#" ng-click="$ctrl.updateOrderEtTri('statut')">
                        Statut
                        <span ng-if="$ctrl.order == 'statut'">
                            <span ng-show="$ctrl.triInverse">
                                <span class="caret"></span>
                            </span>
                            <span ng-show="!$ctrl.triInverse">
                                <span class="dropup"><span class="caret"></span></span>
                            </span>
                        </span>
                    </a>
                </th>
                <th>
                    <a href="#" ng-click="$ctrl.updateOrderEtTri('action')">
                        Actions
                        <span ng-if="$ctrl.order == 'action'">
                            <span ng-show="$ctrl.triInverse">
                                <span class="caret"></span>
                            </span>
                            <span ng-show="!$ctrl.triInverse">
                                <span class="dropup"><span class="caret"></span></span>
                            </span>
                        </span>
                    </a>
                </th>
            </tr>
        </thead>
        <tbody>

            <tr ng-repeat="absence in $ctrl.absences| orderBy:$ctrl.order:$ctrl.triInverse">

                <td>{{absence.dateDebut}}</td>
                <td>{{absence.dateFin}}</td>
                <td>{{absence.type}}</td>
                <td>{{absence.statut}}</td>
                <td>
                    <span ng-repeat="action in absence.actions">
                        <span ng-if="action == 'modification'">
                            <a ng-click='$ctrl.modification(absence.id, absence.dateDebut, absence.dateFin, absence.type, absence.motif)' href="./absence/modification"><span class="glyphicon glyphicon-pencil"></span></a>
                        </span>
                        <span ng-if="action == 'suppression'">
                            <a href="#" ng-click="$ctrl.supprimerAbsence(absence.id, absence.dateDebut, absence.dateFin, absence.type)"><span class="glyphicon glyphicon-trash"></span></a>
                        </span>
                        <span ng-if="action == 'visualisation'">
                            <a href="http://lienVersLApplicationDeGestionDesMissions/visualisation"><span class="glyphicon glyphicon-eye-open"></span></a>
                        </span>
                    </span>
                </td>
            </tr>
        </tbody>
    </table>

    <h4 class="text-right">
        Demander une absence
        <a href="./absence/demande" class="btn btn-primary">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
        </a>
    </h4>
    
    <br/><br/>

    <p>Soldes des compteurs :</p>
    <ul>
        <li>Congés payés : {{$ctrl.congesPayes}}</li>
        <li>RTT : {{$ctrl.rtt}}</li>
    </ul>

</div>
